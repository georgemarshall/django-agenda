{% extends "base.html" %}
{% load dajaxice_templatetags %}
{% load agenda %}

{% block htmlheader %}
{% dajaxice_js_import %}

<script type='text/javascript'>
$(document).ready(function() {	
	$('#calendar').fullCalendar({
		firstDay : 1 ,//monday
		weekMode : 'variable',
		year: {{month.year}},
		month: {{month.month}}-1,
		header: {
			left: 'prev,next today',
			center: 'title',
			right: 'month,agendaWeek,agendaDay'
		},
		editable: true,
		selectable: true,
		selectHelper: true,
		select: function(startDate, endDate, allDay) {
			
		},
	    dayClick: function(date, allDay, jsEvent, view) {
			console.log(date);
	    },
	    eventClick: function(calEvent, jsEvent, view) {
	        alert('Event: ' + calEvent.title + ' id=' + calEvent.id);
	        alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
	        alert('View: ' + view.name);
	    },
		{% if event_list %}
		events: [
		         {% for event in event_list %}
					{
						id : {{ event.id }},
						title: '{{ event.title }}',
						start: new Date({{ event.start_datetime|date:"Y, m-1, d, H, i"}}),
						end: new Date({{ event.end_datetime|date:"Y, m-1, d, H, i"}}),
					},
				{% endfor %}
				],
		{% endif %}
	});
	
});
</script>

{% endblock %}

{% block content %}
<div class="grid_16 alpha omega">
<a href="{% url myagenda_create_event %}" >Create event</a>
</div>
<div id="calendar_list" class="grid_2 alpha">
Calendar(s)
</div>
<div id="calendar_container" class="grid_12">
	<div id="calendar">
	</div>
</div>
<div id="event_detail" class="grid_2 omega">
</div>
{% endblock %}
